<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style_predict.css">
  <title>Document</title>
</head>

<!-- 
movie_name
month
year
runtime
genres
country
mpaa
budget
screens
meta_score
ratings
sequel
opening_week
 -->

<body>
  <h1>Dự đoán doanh thu phim</h1>
  <form class="multi-input-form">
    <div class="col col-1">

      <div class="input-group">
        <label class="label">Predict Opening Weekend?</label>
        <div class="radio-container">
          <input type="radio" id="opening_week_0" name="input-opening_week" value="0" checked>
          <label for="opening_week_0">No</label>
        </div>
        <div class="radio-container">
          <input type="radio" id="opening_week_1" name="input-opening_week" value="1">
          <label for="opening_week_1">Yes</label>
        </div>
      </div>

      <div class="input-group">
        <label for="input-movie_name" class="label">Movie name:</label>
        <input type="text" id="input-movie_name" name="input-movie_name">
      </div>
      <div class="release-date">
        <div class="input-group">
          <label for="input-month" class="label">Month:</label>
          <select class="sel-inp" id="input-month" name="input-month">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
        </div>
        <div class="input-group">
          <label for="input-year" class="label">Year:</label>
          <select class="sel-inp" id="input-year" name="input-year">
            <!-- Loop through years from 1900 to 2024 -->
            <!-- This part will be dynamically generated in the backend -->
            <script>
              for (let year = 1900; year <= 2024; year++) {
                document.write(`<option value="${year}">${year}</option>`);
              }
            </script>
          </select>
        </div>
        <div class="input-group">
          <label for="input-mpaa" class="label">MPAA:</label>
          <select id="input-mpaa" name="input-mpaa">
            <option value="PG-13">PG-13</option>
            <option value="G">G</option>
            <option value="R">R</option>
            <option value="PG">PG</option>
            <option value="NC-17">NC-17</option>
          </select>
        </div>
      </div>

      <div class="input-group">
        <label for="input-runtime" class="label">Runtime:</label>
        <input type="text" id="input-runtime" name="input-runtime">
      </div>

      <div class="input-group">
        <label for="input-genres" class="label label-genres" id="label-genres">Genres: <div id="genres-list"></div>
        </label>
        <input type="text" id="input-genres" name="input-genres">
        <div id="genre-suggestions"></div>
        <button type="button" id="add-genre-btn">Thêm</button>
      </div>

      <div class="input-group">
        <label for="input-country" class="label label-country" id="label-country">Country: <div id="country-list"></div>
        </label>
        <input type="text" id="input-country" name="input-country">
        <div id="country-suggestions"></div>
        <button type="button" id="add-country-btn">Thêm</button>
      </div>

      <!-- Col 2 -->
    </div>
    <div class="col col-2">
      <div class="input-group">
        <label for="input-budget" class="label">Budget:</label>
        <input type="text" id="input-budget" name="input-budget">
      </div>
      <div class="input-group">
        <label for="input-screens" class="label">Screens:</label>
        <input type="text" id="input-screens" name="input-screens">
      </div>
      <div class="input-group">
        <label for="input-meta_score" class="label">Meta score:</label>
        <input type="text" id="input-meta_score" name="input-meta_score">
      </div>
      <div class="input-group">
        <label for="input-ratings" class="label">Ratings:</label>
        <input type="text" id="input-ratings" name="input-ratings">
      </div>

      <div class="input-group">
        <label class="label">Sequel:</label>
        <div class="radio-container">
          <input type="radio" id="sequel-0" name="input-sequel" value="0">
          <label for="sequel-0">0</label>
        </div>
        <div class="radio-container">
          <input type="radio" id="sequel-1" name="input-sequel" value="1">
          <label for="sequel-1">1</label>
        </div>
      </div>

      <div class="input-group" id="div-inp-opn-week">
        <label for="input-opening_week" class="label">Opening week:</label>
        <input type="text" id="input-opening_week" name="input-opening_week">
      </div>

      <div class="input-group btn-submit">
        <button type="submit" class="submit-button">Submit</button>
      </div>
    </div>
  </form>




</body>

<script>
  // Genres
  document.getElementById('input-genres').addEventListener('input', function () {
    const input = this.value.trim().toLowerCase();
    const suggestions = document.getElementById('genre-suggestions');

    const validGenres = `Short Drama Comedy Cocumentary Adult Action Thriller Romance Animation Family Horror Crime Adventure Fantasy Sci_Fi Mystery Biography History Sport Musical War Western Film_noir`.split(' ');

    suggestions.innerHTML = '';

    const matchedGenres = validGenres.filter(genre => genre.toLowerCase().includes(input));

    matchedGenres.forEach(genre => {
      const suggestionItem = document.createElement('div');
      suggestionItem.textContent = genre;
      suggestionItem.classList.add('genre-suggestion');
      suggestionItem.addEventListener('click', function () {
        document.getElementById('input-genres').value = this.textContent;
        suggestions.innerHTML = '';
      });
      suggestions.appendChild(suggestionItem);
      suggestions.style.display = 'block';
    });
  });

  document.addEventListener('click', function (event) {
    const genresSuggestions = document.getElementById('genre-suggestions');
    const clickedElement = event.target;

    if (!genresSuggestions.contains(clickedElement)) {
      genresSuggestions.style.display = 'none';
    }
  });

  document.getElementById('add-genre-btn').addEventListener('click', function () {
    const genresInput = document.getElementById('input-genres');
    const genresList = document.getElementById('genres-list');
    const genreValue = genresInput.value.trim();

    const validGenres = `short drama comedy documentary adult action thriller romance animation family horror crime adventure fantasy sci_Fi mystery biography history sport musical war western film_noir`.split(' ');

    if (validGenres.includes(genreValue.toLowerCase())) {
      const genreItem = document.createElement('div');
      genreItem.classList.add('genre-item');
      genreItem.textContent = genreValue;

      const removeButton = document.createElement('button');
      removeButton.textContent = 'X';
      removeButton.classList.add('remove-btn');
      removeButton.addEventListener('click', function () {
        genresList.removeChild(genreItem);
      });

      genreItem.appendChild(removeButton);
      genresList.appendChild(genreItem);

      genresInput.value = '';
    } else {
      alert('Invalid genre!');
    }
  });

  const validCountry = [
    "Afghanistan",
    "Albania",
    "Algeria",
    "Andorra",
    "Angola",
    "Antigua and Barbuda",
    "Argentina",
    "Armenia",
    "Australia",
    "Austria",
    "Azerbaijan",
    "Bahamas",
    "Bahrain",
    "Bangladesh",
    "Barbados",
    "Belarus",
    "Belgium",
    "Belize",
    "Benin",
    "Bhutan",
    "Bolivia",
    "Bosnia and Herzegovina",
    "Botswana",
    "Brazil",
    "Brunei",
    "Bulgaria",
    "Burkina Faso",
    "Burundi",
    "Côte d'Ivoire",
    "Cabo Verde",
    "Cambodia",
    "Cameroon",
    "Canada",
    "Central African Republic",
    "Chad",
    "Chile",
    "China",
    "Colombia",
    "Comoros",
    "Congo (Congo-Brazzaville)",
    "Costa Rica",
    "Croatia",
    "Cuba",
    "Cyprus",
    "Czechia (Czech Republic)",
    "Democratic Republic of the Congo",
    "Denmark",
    "Djibouti",
    "Dominica",
    "Dominican Republic",
    "Ecuador",
    "Egypt",
    "El Salvador",
    "Equatorial Guinea",
    "Eritrea",
    "Estonia",
    "Eswatini",
    "Ethiopia",
    "Fiji",
    "Finland",
    "France",
    "Gabon",
    "Gambia",
    "Georgia",
    "Germany",
    "Ghana",
    "Greece",
    "Grenada",
    "Guatemala",
    "Guinea",
    "Guinea-Bissau",
    "Guyana",
    "Haiti",
    "Holy See",
    "Honduras",
    "Hungary",
    "Iceland",
    "India",
    "Indonesia",
    "Iran",
    "Iraq",
    "Ireland",
    "Israel",
    "Italy",
    "Jamaica",
    "Japan",
    "Jordan",
    "Kazakhstan",
    "Kenya",
    "Kiribati",
    "Kuwait",
    "Kyrgyzstan",
    "Laos",
    "Latvia",
    "Lebanon",
    "Lesotho",
    "Liberia",
    "Libya",
    "Liechtenstein",
    "Lithuania",
    "Luxembourg",
    "Madagascar",
    "Malawi",
    "Malaysia",
    "Maldives",
    "Mali",
    "Malta",
    "Marshall Islands",
    "Mauritania",
    "Mauritius",
    "Mexico",
    "Micronesia",
    "Moldova",
    "Monaco",
    "Mongolia",
    "Montenegro",
    "Morocco",
    "Mozambique",
    "Myanmar (formerly Burma)",
    "Namibia",
    "Nauru",
    "Nepal",
    "Netherlands",
    "New Zealand",
    "Nicaragua",
    "Niger",
    "Nigeria",
    "North Korea",
    "North Macedonia",
    "Norway",
    "Oman",
    "Pakistan",
    "Palau",
    "Palestine State",
    "Panama",
    "Papua New Guinea",
    "Paraguay",
    "Peru",
    "Philippines",
    "Poland",
    "Portugal",
    "Qatar",
    "Romania",
    "Russia",
    "Rwanda",
    "Saint Kitts and Nevis",
    "Saint Lucia",
    "Saint Vincent and the Grenadines",
    "Samoa",
    "San Marino",
    "Sao Tome and Principe",
    "Saudi Arabia",
    "Senegal",
    "Serbia",
    "Seychelles",
    "Sierra Leone",
    "Singapore",
    "Slovakia",
    "Slovenia",
    "Solomon Islands",
    "Somalia",
    "South Africa",
    "South Korea",
    "South Sudan",
    "Spain",
    "Sri Lanka",
    "Sudan",
    "Suriname",
    "Sweden",
    "Switzerland",
    "Syria",
    "Tajikistan",
    "Tanzania",
    "Thailand",
    "Timor-Leste",
    "Togo",
    "Tonga",
    "Trinidad and Tobago",
    "Tunisia",
    "Turkey",
    "Turkmenistan",
    "Tuvalu",
    "Uganda",
    "Ukraine",
    "United Arab Emirates",
    "United Kingdom",
    "United States of America",
    "Uruguay",
    "Uzbekistan",
    "Vanuatu",
    "Venezuela",
    "Vietnam",
    "Yemen",
    "Zambia",
    "Zimbabwe"
  ];

  // Country
  document.getElementById('input-country').addEventListener('input', function () {
    const input = this.value.trim().toLowerCase();
    const suggestions = document.getElementById('country-suggestions');

    suggestions.innerHTML = '';

    const matchedCountries = validCountry.filter(country => country.toLowerCase().includes(input));

    matchedCountries.forEach(country => {
      const suggestionItem = document.createElement('div');
      suggestionItem.textContent = country;
      suggestionItem.classList.add('country-suggestion');
      suggestionItem.addEventListener('click', function () {
        document.getElementById('input-country').value = this.textContent;
        suggestions.innerHTML = '';
      });
      suggestions.appendChild(suggestionItem);
      suggestions.style.display = 'block';
    });
  });

  document.addEventListener('click', function (event) {
    const genresSuggestions = document.getElementById('country-suggestions');
    const clickedElement = event.target;

    if (!genresSuggestions.contains(clickedElement)) {
      genresSuggestions.style.display = 'none';
    }
  });

  document.getElementById('add-country-btn').addEventListener('click', function () {
    const countryInput = document.getElementById('input-country');
    const countryList = document.getElementById('country-list');
    const countryValue = countryInput.value.trim();

    if (validCountry.includes(countryValue)) {
      const countryItem = document.createElement('div');
      countryItem.classList.add('country-item');
      countryItem.textContent = countryValue;

      const removeButton = document.createElement('button');
      removeButton.textContent = 'X';
      removeButton.classList.add('remove-btn');
      removeButton.addEventListener('click', function () {
        countryList.removeChild(countryItem);
      });

      countryItem.appendChild(removeButton);
      countryList.appendChild(countryItem);

      countryInput.value = '';
    } else {
      alert('Invalid country!');
    }
  });

  // Submit
  function saveFormData() {
    // Lấy giá trị từ các trường input
    const movieName = document.getElementById('input-movie_name').value.trim();
    const month = document.getElementById('input-month').value;
    const year = document.getElementById('input-year').value;
    const mpaa = document.getElementById('input-mpaa').value;
    const runtime = document.getElementById('input-runtime').value.trim();
    const genresList = document.getElementById('genres-list');
    const countryList = document.getElementById('country-list');
    const genres = Array.from(genresList.children).map(genreItem => genreItem.textContent.trim().slice(0, -1)).join(', ');
    const country = Array.from(countryList.children).map(countryItem => countryItem.textContent.trim().slice(0, -1)).join(', ');
    const budget = document.getElementById('input-budget').value.trim();
    const screens = document.getElementById('input-screens').value.trim();
    const metaScore = document.getElementById('input-meta_score').value.trim();
    const ratings = document.getElementById('input-ratings').value.trim();
    const sequel = document.querySelector('input[name="input-sequel"]:checked').value;

    console.log("Movie Name:", movieName);
    console.log("Month:", month);
    console.log("Year:", year);
    console.log("MPAA:", mpaa);
    console.log("Runtime:", runtime);
    console.log("Genres:", genres);
    console.log("Country:", country);
    console.log("Budget:", budget);
    console.log("Screens:", screens);
    console.log("Meta Score:", metaScore);
    console.log("Ratings:", ratings);
    console.log("Sequel:", sequel);

    if (openingWeekDiv.style.display == "block") {
      const openingWeek = document.getElementById('input-opening_week').value.trim();
      console.log("Opening Week:", openingWeek);
    }

  }

  document.addEventListener('DOMContentLoaded', function () {
    // Bắt sự kiện khi nhấn nút "Submit"
    document.querySelector('.submit-button').addEventListener('click', function (event) {
      // Ngăn chặn hành động mặc định của nút "Submit"
      event.preventDefault();

      // Gọi hàm để lấy giá trị từ form và lưu vào các biến
      saveFormData();
    });
  });

  const openingWeekRadioNo = document.getElementById('opening_week_0');
  const openingWeekRadioYes = document.getElementById('opening_week_1');
  const openingWeekDiv = document.getElementById('div-inp-opn-week');

  openingWeekRadioNo.addEventListener('click', function () {
    openingWeekDiv.style.display = 'none';
  });

  openingWeekRadioYes.addEventListener('click', function () {
    openingWeekDiv.style.display = 'block';
  });

</script>

</html>